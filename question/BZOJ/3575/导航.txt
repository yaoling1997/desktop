[Hnoi2014]道路堵塞
还算是一道难想到的题,反正考场上直接打了40分暴力
正着构一颗最短路树(1号点为根),反着也构一颗(n号点为根)
然后把他给出的那条最短路看成一个序列,就相当于区间修改单点查询了
每个点记录正的最短路树它的在给出的最短路上的祖先是谁,反的最短路树它的在给出的最短路上的祖先是谁
枚举每一条边,看它能更新哪一段,被更新的那一段无论怎么删边都不会影响这条边的最短路,显然,它能更新的那一段就是from的正的最短路树上的祖先到to的反的最短路树上的祖先之间的那一段,然后用经过这条边的最短路长度去更新就是了
把边看成线段树中的点,每个点的权值为最短路长度,一开始每个结点的值都是+oo,用所有能更新它的边取更新,然后再枚举他给出的最短路上的边单点查询就行了
还是有点细节的,反正出了点问题改了下就行了
考场上打了个make,留着考完后用
这题spfa有个优化,不加好像还过不了,就是在求最短路的时候把他给出的点的距离先直接算出来再全部丢到队列里面,这样要快得多,否则会被卡掉3个点
lydsy竟然改了数据,把这个算法卡掉了
这个算法是有反例的
