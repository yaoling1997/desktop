[Noi2013]快餐店
60分做法显然,枚举环上的边,删掉求最长链,取其中最短的一条,然后/2就行了
100分就是优化一下这玩意,用线段树优化
设环上的点为1~n
将1~n这条边删掉,s[i]表示环上长度前缀和,d[i]表示i向下延伸的长度
然后设i<j则经过i,j的最长路就是s[j]-s[i]+d[i]+d[j]
也就是-s[i]+d[i]+s[j]+d[j]了,设A=-s[i]+d[i],B=s[j]+d[j]
然后线段树维护两个值A和B的最大值
每次用左边的A+右边的B更新子树最长链的值,ans为枚举删掉每条边的最小值,每次ans= min(ans,w[1])就行了,w[i]表示线段树以i为根的子树的最长的最长路
枚举删除环上每条边的时候,一部分连续的点都同时减去一个值,另外一个点再单点修改放在后面就行了
还要考虑环上每个点的子树中的最长链,DP就行了,设为C
然后ans= max(ans,C)
除以2输出就行了
