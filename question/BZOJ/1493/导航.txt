[NOI2007]项链工厂
貌似还可以用线段树,不过我觉得splay还是好打一些的
就是一堆merge+split
然后维护值的时候维护当前点最左是谁,最右是谁
然后记录一下左儿子的右标记以及右儿子的左标记
然后更新一下这一段右多少个部分就行了
好久没打splay了,调了半天
而且还有点慢,最后一个点跑4.2s多,不过懒得优化了
BZOJ 8s多
那个保护节点还得跟1号节点保持颜色一致,不然会多算的
