[Cqoi2014]危桥
做两遍无向图的最大流就好了
为什么呢?
先an*2,bn*2,因为是往返,相当于走两次
然后s向a1,b1分别连容量为an,bn的边,a2,b2向t连an,bn的边(这里我连的是有向边,就是一对弧)
然后跑最大流
如果不满流,显然无解,否则还没结束
因为这样跑出来的最大流有可能是b1给了a2 x的流,a1给了b2 x的流,然后再加上b1给b2 bn-x的流,a1给a2 an-x的流就刚好满流了,显然这是不可以的,a1只能给a2流,b1只能给b2流,若a1和b1还能互相补充的话,就扩大了解的范围
怎么办呢?方法很简单,就是去掉原来的源和汇所连的边,s改连a1,b2,a2,b1改连t(这里我连的也是有向边)
然后再从s跑到t,若满流了,就可以了,不然就不行
为什么呢?如果考场上在不知到正解的情况下为了提高自己的正确率,肯定会这么做,而且这么做就是正解
考虑如何证明
首先在第一次满流流时a1可以给b2 x的流,a2 an-x的流,b1可以给a2 x的流,b2 bn-x的流
第二次满流时 a1可以给a2 an-x的流,也就能给b1 x的流,由于是无向图,所以b2也能给b1 bn-x的流,那么也能给a2 x的流,由于a1可以给b1 x的流量,也能给b2 x的流量,然后我们可以调整,使a1到b1 x的流量调整为先从b2流到a1(因为a1能给b2 x的流量,由于是无向图,b2也能给a1 x的流量)再从a1流到b1
x:
首先我学会的是无向图的最小费用最大流,于是就改用spfa来做,连边的话设费用为1就行了,发现跑完一遍后再连边出了问题,一开始还只从edges中弹掉4条边,更正为8条后发现忘记弹g的了,弹了后发现弹多了,然后终于过了
x1:
无向图最大流
填了个坑,跑得还快一些,当然所有数据所花总时间加起来都是毫秒级的
把反边变成容量相同的边就行了,一开始我还连了两条,把我自己坑了一下
