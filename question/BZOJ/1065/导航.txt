[NOI2008]奥运物流
搞了半天终于搞出来了
一开始不知道怎么搞,看了题解后会了一种2B贪心,听说当年还可以拿70分,不过懒得打了
然后去看正解,说是树形DP,但这玩意明明有个环,又怎么叫作树形DP呢?
然后搞了半天,还是没懂
然后过了几天问农侃,被他农了一下好像会一点了
f[i,j,k]表示第i个点,子树操作不超过j次,离1好点距离为k
每次枚举环上的一个点(除了1号),把他的出边改为1,显然若这个点需要改的话这是最优的选择
树是怎么来的?不是说1的出边不能改么?把它去掉就是一颗树了,然后就树形DP
不过要注意新形成的环上的点的边是没有必要改向1的,画下图就知道了
不是有个R(i)的公式不,它要使R(1)最大,就有R(1)= sigma C[i]/(1-k^len)
其中len是环长度,显然环上的点满足这个公式,不过好像对于所有的点都满足这个公式
然后就考虑怎么转移,一个点有两种选择,改或不改,改的话就要消耗1的代价,然后子树的深度都会减少,两种方式都尝试一下,递归处理子树
边界就是当前点是叶节点,显然能改就该
在往上更新的时候要用到几乎从没用过的分组背包了,就是每组只能选一个物品
不妨用一个F数组来处理
枚举组,相当于枚举儿子 F[i]表示当前子树可以改多少次
若当前点不改向1
F[i]= max(F[i],F[i-j]+f[v][j][d+1])
否则F[i]= max(F[i],F[i-j]+f[v][j][2])
for i的时候从大到小for常见的背包优化
然后f[i][j][k]= F[j]+C[i]/(1-k^len)就行了
反正调了半天,浙江的题就是不容易
