[NOI2007]货币兑换
以前一直都不知道cdq分治是什么,好像很厉害的样子
做了这道题之后才发现原来我会cdq分治,在三维偏序时用的那玩意就是cdq分治
首先一个很裸的方程就是设f[i]为第i天的收益最大值
由于每天要么全买,要么全卖(感性地想想这样是最优的)
所以f[i]= max(f[j]+w(j,i))
w(j,i)代表把f[j]全买了在i的时候全卖的收益
然后就有60分了
如果要100分的话
假设我们要用j去更新i(1<=j<i)
那么设f[i]的值为p,A表示把f[j]全买了可以获得多少A券的份额,B就是B券的份额了
B= f[j]/(r[j]*a[j]+b[j])
A= r[j]*B
p= A*a[i]+B*b[i]
B= (p-A*a[i])/b[i]
B= -a[i]/b[i]*A+p/b[i]
然后要使p最大,不妨把(A,B)看成点
然后发现-a[i]/b[i]是<0的
然后凸包就出现了
标解是用spaly动态维护凸包上的点,想想都不好做
然后cdq分治就出现了
cdq分治就是把一段分成两段,先把前面一段的搞完,再用前面一段去更新后面一段,再继续搞后面一段
然后发现搞的时候非常简单
先把前面那一段的右上凸包搞出来(从y最大的点开始向右搞上凸包)
然后把右边的点按-a[i]/b[i]排序
然后像线性规划一样找更新它的点,发现只要一遍扫就行了
nlogn^2的
cdq貌似是nlogn的,自己yy的能过就行了
