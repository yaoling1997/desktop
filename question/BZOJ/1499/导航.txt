[NOI2005]瑰丽华尔兹
手写堆完虐STL
STL最慢的点3s多,手写堆最慢的点0.7s
首先有个很朴素的想法可以拿50分
设f[t,i,j]表示时刻t,位置为(i,j)的最大值
显然有:f[t,i,j]= max(f[t-1,i,j],f[t-1][当前时刻的倾向]+1)
但是t高达40000,如果这样的话显然会T
但是题目给了一个特殊条件,就是k个时间段,我们可以利用这玩意优化
若当前第t个时间段的倾向为→,时间段长度为x,则有f[t,i,j]= max(f[t-1,i,j-k]+k)(0<=k<=x)
然后可以用一个单调队列优化到O(1)
注意,插进去的值是f[t-1,i,j]+m,m根据倾向来确定
我是顺着风向for的,这样处理比较方便,是顺着风向一行或一列更新的
遇到障碍物把队列清空,f值赋为-oo就行了
