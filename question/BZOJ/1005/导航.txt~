[HNOI2008]明明的烦恼
以前见过这个结论,不过一直以为没什么用,没想到竟然还有这样的题,正好拿来练手
这玩意要用到一个叫作prufer序列的东西,就是说n个有标号的点对应于一个长度为n-2的序列
怎样将一颗有标号的数转换为一个长度为n-2的序列呢?这里用了一个很神奇的方法
每次选择一个标号最小的叶子节点,把它和它的那条边去掉,并把与它相连的另一个点放进b数组中,直到树中只有两个节点为止
还原的方法也很神奇
每次从1~n的集合a种选一个标号最小的没出现在b数组中的数x,把它与b最前端的数y连边,并从b数组中去掉y,集合a中去掉x
然后就可以用排列组合解决此题了
对于一个给定度数d的结点,它在最终的排列中占有d-1个位子
然后设sum为给定度数-1之和,sum就是给定度数的结点最终所占的位置之和了
那么设n-2个位子中还剩下w个位子,有k个结点没有确定度数,剩下的位子可以在k个节点中任意取,那么最后还要乘上k^w
综上,最后的答案就是C(n-2,sum)*sum!/∏(d[i]-1)*k^w
然后还要写个高精度
