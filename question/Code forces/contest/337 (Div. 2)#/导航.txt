d:
其实在windows下编程也不是很难受
再给我几分钟我就能过了...
不过反正开的是小号...
不知道是细节太多了还是我太傻了
各种打错变量名之类的
很明显先把线段分两类:平行于x轴和平行于y轴的
分别计算贡献
我这里做了个处理
把分别相交的线段合为一条
然后再考虑第一类与第二类的交点
也就是重复计算的答案
把y相同的线段抽象为两个点
左端点进,右端点出
相当于事件
然后再把这些点排序
然后再去扫x相同的线段
每次就把<x的事件处理完
再处理和x相同的插入事件
也就是单点修改+1
每次询问就是区间求和
这玩意用树状数组就可以了
把x相同的询问一并询问了
从答案中减去这些值
最后再处理和x相同的删除事件
然后就没了
