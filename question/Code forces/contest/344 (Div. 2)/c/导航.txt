c:
好久没敲splay了
于是心血来潮敲了个splay
然后发现好多地方都敲错了
改了半天
然后发现print的时候又忘记下放标记了
用splay就是先读那些玩意
如果后面读进来的r>=前面的r那么就把前面的去掉直到不能去为止
如果小于前面的r但改变的顺序是一样的
就不需要考虑
最后需要执行的操作肯定是从长到短交替着弄
很显然可以对于第一个长的操作进行排序
之后的就翻转就行
然后就想到了splay
不过别人的代码都挺短的,正解应该不是splay

正解的方法很巧秒(是我太傻了)
前面处理询问是一样的
然后把a数组复制一份给b数组
然后让b+1~b+r1不减排序
弄两个指针p=1,q=r1
然后从第2个处理开始往后面扫
设当前扫到第i个处理
那么ri+1~r_(i-1)的值都可以确定了
依照t_(i-1)确定
然后就没了
