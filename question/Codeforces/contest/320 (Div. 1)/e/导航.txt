e:
搞了半天总算过了
果然有的题目没看题解就觉得超难
看了题解后瞬间变水...
这题就是给一个字符串,只包含L和R
比如说
RRLRL
这是一个人用左右脚走出来的痕迹
他一定是左右脚轮流走
第一步不知道是左脚还是右脚
然后他的脚可以跨无限宽
他可以往回走
求一个走的方案使得往回走的次数最少
输入保证有解
一看见是构造题我就好慌...
然后掺合着题解终于弄出来了
首先设最少次数为k
那么肯定可以把这个串分成k+1个不走回头路的序列
(显然)
那么我们反过来考虑
若有k+1个不走回头路的序列
那么最多只能将它合成为走k次回头路的序列
合成就是让一个序列接在另一个序列前面或后面
然后按顺序走
若我们得到了这k+1个序列
我们只关心每个序列的第一步和最后一步
所以这些序列可以分为4类
LL,RR,LR,RL
个数分别为A,B,C,D
显然abs(A-B)<=1
否则就不合法了
然后考虑怎么拼接
对于LL和RR
那当然是一个LL一个RR交替着拼
最后顶多会剩下一个LL或RR
对于LR和RL
就先让LR们拼成一个LR,RL们拼成一个RL
对最后拼好的LR和RL
考虑它们各自的最后一步
不妨设(a=LR的最后一步R的位置)>(b=RL最后一步L的位置)
那么把a这一步放到RL后面
这样做显然不会增加走回头路的次数
那么就得到了LL和RR！
然后拿去随便拼就行了
不过要小心那种某情况没有的数据(wa了好多次......)
那么怎么弄出这k+1个序列呢?
L  L
R  R
R  R
L  L
R  R
拆点成上面那个样子
连边就像图那样连
左边的每个L都向右边的位置低于它的R连
左边的每个R都向右边的位置低于它的L连
n减去最大匹配即为序列数
因为假设把每个元素分为一个序列
一条匹配边就合并了两个序列
使分得的序列总数减少
但普通的最大匹配是n^2的
但是这个图很特殊
所以O(n)就能求出最大匹配
搞两个变量做指针就行了
然后就没了
