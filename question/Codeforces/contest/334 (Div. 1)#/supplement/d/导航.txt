d:
想了半天没想出来
原来是要用到一个叫作Simson Line的没见过的东西
这玩意就是说四点共圆当且仅当其中一点向其余三点各自的连线的垂足共线
就是其中一点向其余三点形成的三条直线作垂线,垂足共线
然后证明看了半天,就是证了一对对顶角相等
然后就证明了三点共线
若三点共线证明四点共圆就倒着抄一遍证明即可
然后就是把原点到每条线的垂足弄出来
一条直线对应一个垂足
然后按标号从小到大一次考虑每个垂足i
其余垂足按斜率排序
然后扫
扫的时候注意满足i<j<k这个限制
如果遇到垂足相等的情况
那么直接给答案+= n-i-1
否则设i的某个斜率上有cnt个点
对答案的贡献即为C(cnt,2)
然后这题卡精度
开long double 精度调到10^-12才过
不过有全程用整型的方法,并且是主流做法
