连线
第二道轮廓线DP题,不过我觉得这才算真正的插头DP(不知到插头DP和轮廓线DP的区别,也许插头DP范围窄一些吧)
枚举六种插头,然后DP就行了
轮廓线DP就是轮廓线+每个格子为状态,然后转移就好了
由于是记忆化搜索,再加上插头DP有很多无用状态,所以应该还比较快
前面那道统计骨牌个数的是二进制的,这个是用三进制表示状态的,由于三进制不能用位运算,所以还要用up来表示每一列向下的插头,当然,还要弄个left表示当前格左侧的插头(这个插头就是当前格左边一个格子的右插头了),接着就可以DP了
不可行的状态也挺多的,但还是要枚举判断是否可行,不同格子的插头个数不同,比如说障碍格上没有插头,空地上要有两个插头(当然是不重复的了),表示一进一出,这两个插头还要是相同类型的(同为类型1或2,0表示没插头,1表示连接2的插头,2表示连接3的插头),不然显然不合法。
考虑特殊格子,也就是放了2或3的格子,对于它们每个格子来说上面最多只有一个插头
怎么转移呢?不同格子转移一般不同
当前格为障碍格,只有可能上面没有插头
对于空地,枚举两个插头位置看能不能配得上就行了,1插头只跟1插头配对,2插头只跟2插头配对,要是插头配不上,就不合法
对于2或3,只要枚举一个插头看看是否能配对就行了
还有什么最右边没有右插头,最下面没有下插头
然后看看是否必须要有左插头或右插头
必须有左插头的条件是当前格不能是最左边且左边那个格子有右插头
必须有上插头的条件是当前格不能是最上面且上面那个格子有下插头
若必须有左插头,检验插头是否配对,要是不能有,当前格有左插头就不合法了
若必须有上插头,检验插头是否配对,要是不能有,当前格有上插头就不合法了
同时有还要判左插和上插是否相同
然后更新新的状态T
把T的插头变变,虽说left是这个格子的右插头,但对于下一个要枚举的格子来说,这个插头在左边,然后它的up也要改成它的下插头
这题可以全用整数解决,方法是使代价一开始*2,输出时/2就行了
S为上一个状态,枚举当前状态T
